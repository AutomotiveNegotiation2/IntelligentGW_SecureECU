ALGBASE_PATH ?= $(abspath ../)
include $(ALGBASE_PATH)/config.mk

ifeq ($(TARGET_PLATFORM), PC)
TIDL_PATH     ?=$(abspath ../../)/ti_dl
$(info TIDL_PATH $(TIDL_PATH))
endif

BUILD_IGNORE_LIB_ORDER := yes
GCC_LINUX_ROOT         := /usr

CGT7X_ROOT := $(DSP_TOOLS)
PDK_PATH   := $(PDK_INSTALL_PATH)

ifeq ($(TARGET_BUILD),debug)
  PROFILE := debug
else
  PROFILE := release
endif

ifeq ($(TARGET_SOC),$(filter $(TARGET_SOC), J721E j721e))
BUILD_DEFS += SOC_J721E
else ifeq ($(TARGET_SOC),$(filter $(TARGET_SOC), J721S2 j721s2))
BUILD_DEFS += SOC_J721S2
else ifeq ($(TARGET_SOC),$(filter $(TARGET_SOC), J784S4 j784s4))
BUILD_DEFS += SOC_J784S4
else ifeq ($(TARGET_SOC),$(filter $(TARGET_SOC), AM62A am62a))
BUILD_DEFS += SOC_AM62A
else
BUILD_DEFS += SOC_J721E
endif

DIRECTORIES := src test

TARGET_COMBOS :=

SYSDEFS := CONCERTO_BUILD

ifeq ($(TARGET_PLATFORM),PC)
  ifeq ($(BUILD_WITH_CUDA), 1)
    TARGET_COMBOS += PC:LINUX:x86_64:1:$(PROFILE):NVCC_LINUX
  else
    TARGET_COMBOS += PC:LINUX:x86_64:1:$(PROFILE):GCC_LINUX
  endif
else
  ifeq ($(TARGET_SOC),$(filter $(TARGET_SOC), J721S2 j721s2))
    TARGET_COMBOS += J721S2:LINUX:A72:1:$(PROFILE):GCC_LINUX_ARM
  else ifeq ($(TARGET_SOC),$(filter $(TARGET_SOC), J784S4 j784s4))
    TARGET_COMBOS += J784S4:LINUX:A72:1:$(PROFILE):GCC_LINUX_ARM    
  else ifeq ($(TARGET_SOC),$(filter $(TARGET_SOC), AM62A am62a))
    TARGET_COMBOS += AM62A:LINUX:A72:1:$(PROFILE):GCC_LINUX_ARM
  else
    TARGET_COMBOS += J7:LINUX:A72:1:$(PROFILE):GCC_LINUX_ARM
  endif
endif

BUILD_MULTI_PROJECT := 1

include $(CONCERTO_ROOT)/rules.mak

# Project specific rules

.PHONY: all
all:
